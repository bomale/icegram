function Icegram_Message_Type_Action_Bar(e){Icegram_Message_Type.apply(this,arguments)}Icegram_Message_Type_Action_Bar.prototype=Object.create(Icegram_Message_Type.prototype),Icegram_Message_Type_Action_Bar.prototype.constructor=Icegram_Message_Type_Action_Bar,Icegram_Message_Type_Action_Bar.prototype.get_template_default=function(){return'<div class="icegram action_bar_{{=id}}" ><div class="ig_action_bar ig_container ig_{{=theme}}" id="icegram_message_{{=id}}"><div class="ig_content ig_clear_fix"><div class="ig_arrow_block" id="action_bar_close_{{=id}}"><span class="ig_arrow"></span></div><div><div class="ig_close"></div></div><div class="ig_form_container layout_left"></div><div class="ig_data"><div class="ig_headline">{{=headline}}</div><div class="ig_message">{{=message}}</div></div><div class="ig_button">{{=label}}</div><div class="ig_form_container layout_right layout_bottom"></div></div></div></div>'},Icegram_Message_Type_Action_Bar.prototype.post_render=function(){(void 0==this.data.use_theme_defaults||"yes"!=this.data.use_theme_defaults)&&void 0!=this.data.bg_color&&""!=this.data.bg_color&&this.el.find(".ig_arrow_block").css("background-color",this.data.bg_color)},Icegram_Message_Type_Action_Bar.prototype.set_position=function(){switch(this.data.position){case"21":this.el.addClass("ig_bottom"),this.el.css("position","fixed");break;case"01":default:this.el.addClass("ig_top")}},Icegram_Message_Type_Action_Bar.prototype.is_visible=function(){return this.el.find(".ig_arrow_block").hasClass("ig_open")},Icegram_Message_Type_Action_Bar.prototype.show=function(e,i){if(!this.is_visible()){switch(this.data.position){case"21":var a=this;this.el.delay(this.data.delay_time).animate({bottom:0,marginBottom:-this.el.outerHeight()},0,"linear",function(){a.el.show(),a.el.addClass("ig_show").removeClass("ig_hide"),a.el.find(".ig_arrow").show(),a.el.find(".ig_arrow_block").addClass("ig_open").removeClass("ig_rotate").removeClass("ig_border"),window.icegram.adjustFormContainerHeight(a)}),this.el.animate({marginBottom:0},300);break;case"01":default:var t=this.el.parent().find(".ig_arrow_block"),s=this.el.parent();this.el.parent().find(".ig_arrow_block").remove(),this.el.parent().find(".ig_content").prepend(t),jQuery("body").prepend(s),this.el.find(".ig_arrow").hide();var a=this;this.el.delay(this.data.delay_time).animate({marginTop:-this.el.outerHeight()},0,"linear",function(){a.el.show(),a.el.addClass("ig_show").removeClass("ig_hide"),a.el.find(".ig_arrow").show(),a.el.find(".ig_arrow_block").addClass("ig_open").addClass("ig_rotate").removeClass("ig_border").css("background-color",""),window.icegram.adjustFormContainerHeight(a)}),this.el.animate({marginTop:0},300)}i!==!0&&this.track("shown")}},Icegram_Message_Type_Action_Bar.prototype.add_powered_by=function(e){this.el.addClass("ig_has_pwby"),"ig_air-mail"!=this.data.theme?this.el.find(".ig_content").before('<div class="ig_powered_by" ><a href="'+e.link+'" target="_blank"><img src="'+e.logo+'" title="'+e.text+'"/></a></div>'):this.el.find(".ig_content").prepend('<div class="powered_by" ><a href="'+e.link+'" target="_blank"><img src="'+e.logo+'" title="'+e.text+'"/></a></div>')},Icegram_Message_Type_Action_Bar.prototype.hide=function(e,i){if(this.is_visible()){var a=this;switch(this.data.position){case"21":this.el.animate({marginBottom:-this.el.outerHeight()},300,"linear",function(){a.el.find(".ig_arrow").show(),a.el.addClass("ig_hide").removeClass("ig_show"),a.el.find(".ig_arrow_block").removeClass("ig_open").addClass("ig_border").addClass("ig_rotate")});break;case"01":default:this.el.animate({marginTop:-this.el.outerHeight()},300,"linear",function(){(void 0==a.data.use_theme_defaults||"yes"!=a.data.use_theme_defaults)&&void 0!=a.data.bg_color&&""!=a.data.bg_color&&a.el.find(".ig_arrow_block").css("background-color",a.data.bg_color),a.el.find(".ig_arrow_block").css("margin-top","0"),a.el.find(".ig_arrow").show(),a.el.addClass("ig_hide").removeClass("ig_show"),a.el.find(".ig_arrow_block").removeClass("ig_open").removeClass("ig_rotate").addClass("ig_border")})}i!==!0&&this.track("closed")}},Icegram_Message_Type_Action_Bar.prototype.on_click=function(e){return e.data=e.data||{self:this},jQuery(e.target).filter(".ig_open,.ig_open span.ig_arrow,.ig_close").length?void e.data.self.hide():jQuery(e.target).filter(".ig_border,.ig_border span.ig_arrow").length?void e.data.self.show():void Icegram_Message_Type.prototype.on_click.apply(this,arguments)};